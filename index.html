<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projet vue WIS</title>
</head>
    <body>
        <div id="myapp">
            <div v-if="records.length > 0" v-for="evt in records">{{evt.fields.lieu}}</div>  
        </div>

        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script src="https://unpkg.com/vue@3"></script>
        <script>
            const apiURL = "https://data.nantesmetropole.fr/api/records/1.0/search/?dataset=244400404_agenda-evenements-nantes-nantes-metropole&q=&facet=emetteur&facet=rubrique&facet=lieu&facet=ville&facet=lieu_quartier"
            const myappdata = {
                data(){
                    return {
                        responsedata: {},
                        records: [],
                        fields: {}
                    }
                }, 
                methods : {
                    async fetchApi(){
                        await axios.get(apiURL)
                        .then((response)=>{
                            console.log(response)
                            this.responsedata = response.data
                            this.records = response.data.records
                            
                            //for(field in this.fields){
                            //    console.log("ok")
                            //    field = records.field
                            //    
                            //}
                            
                        })
                        .catch((error)=>{
                            console.log(error)
                        })
                    }
                },
                mounted(){
                    this.fetchApi()
                }
            }
            const myapp = Vue.createApp(myappdata).mount("#myapp")
        </script>
    </body>
</html>